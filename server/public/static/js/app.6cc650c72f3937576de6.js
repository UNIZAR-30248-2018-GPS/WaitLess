webpackJsonp([1],{D4uH:function(e,t,n){"use strict";var r=n("bOdI"),i=n.n(r),o=n("Gu7T"),a=n.n(o);function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var l={},c={name:"fa-icon",render:function(e){if(null===this.name)return e();var t={class:this.klass,style:this.style,attrs:{role:this.label?"img":"presentation","aria-label":this.label||null,x:this.x,y:this.y,width:this.width,height:this.height,viewBox:this.box}};return this.raw&&(t.domProps={innerHTML:this.raw}),e("svg",t,this.raw&&this.icon?null:this.$slots.default||[].concat(a()(this.icon.paths.map(function(t,n){return e("path",{attrs:t,key:"path-"+n})})),a()(this.icon.polygons.map(function(t,n){return e("polygon",{attrs:t,key:"polygon-"+n})}))))},props:{name:{type:String,validator:function(e){return!e||e in l||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+e+'".\nPlease make sure you have imported this icon before using it.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(e){return"horizontal"===e||"vertical"===e}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},klass:function(){return i()({"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse},this.$options.name,!0)},icon:function(){return this.name?l[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var e=this.icon,t=e.width,n=e.height;return Math.max(t,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var e=this.icon.raw,t={};return e=e.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(e,n,r){var i="fa-"+(u++).toString(16);return t[r]=i,' id="'+i+'"'}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(e,n,r,i){var o=n||i;return o&&t[o]?"#"+t[o]:e}),e}},mounted:function(){var e=this;if(this.name||null===this.name||0!==this.$children.length){if(!this.icon){var t=0,n=0;this.$children.forEach(function(r){r.outerScale=e.normalizedScale,t=Math.max(t,r.width),n=Math.max(n,r.height)}),this.childrenWidth=t,this.childrenHeight=n,this.$children.forEach(function(e){e.x=(t-e.width)/2,e.y=(n-e.height)/2})}}else console.warn('Invalid prop: prop "name" is required.')},register:function(e){for(var t in e){var n=e[t],r=n.paths,i=void 0===r?[]:r,o=n.d,a=n.polygons,c=void 0===a?[]:a,u=n.points;o&&i.push({d:o}),u&&c.push({points:u}),l[t]=s({},n,{paths:i,polygons:c})}},icons:l},u=870711;var d=n("VU/8")(c,null,!1,function(e){n("DgEz")},null,null);t.a=d.exports},DgEz:function(e,t){},Duwz:function(e,t){},JP8q:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),i=n("zL8q"),o=n.n(i),a=(n("tvR6"),n("JR9b")),s=n.n(a),l=(n("D/PP"),n("D4uH")),c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("el-container",[n("el-container",[n("el-header",[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal",router:""}},[n("el-menu-item",{attrs:{index:"pedidos"}},[e._v("Pedidos")]),e._v(" "),n("el-menu-item",{attrs:{index:"disponibilidad"}},[e._v("Disponibilidad de carta")]),e._v(" "),n("el-menu-item",{attrs:{index:"modificar"}},[e._v("Modificar carta")]),e._v(" "),n("el-menu-item",{attrs:{index:"anadir"}},[e._v("Añadir a carta")])],1)],1),e._v(" "),n("el-main",[n("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")({name:"App",data:function(){return{activeIndex:"pedidos"}}},c,!1,function(e){n("Duwz")},null,null).exports,d=n("/ocq"),p=n("mtWM"),f=n.n(p),h=function(){return f.a.create({baseURL:"http://localhost:3030/api/"})},m=function(e){var t=new WebSocket("ws://localhost:3030/api/pedido/ws");t.onclose=function(e){console.log("Ws closed")},t.onmessage=function(t){console.log(JSON.parse(t.data)),e(JSON.parse(t.data))},t.onopen=function(){t.send("ping")}},g=function(){return h().get("carta")},v=function(e,t,n,r,i,o){return h().post("plato/nuevoPlato",{nombre:e,descripcion:t,precio:n,tipo:r,alergenos:i,ingredientes:o})},b=function(e,t){return t?h().post("plato/darDisponibilidad/"+e):h().post("plato/borrarDisponibilidad/"+e)},w=function(){return h().get("/plato/getAllAlergenos")},_=function(){return h().get("plato/getAllIngredientes")},x=function(e){return h().post("/plato/anadir_despensa/"+e)},y={methods:{tableRowClassName:function(e){e.row,e.rowIndex;return""},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},callWs:function(){m(this.newPedido)},newPedido:function(e){this.wsData.push(e),this.loading=!1,console.log("DATOS->"+this.wsData)}},mounted:function(){this.$nextTick(function(){this.callWs()})},data:function(){return{loading:!1,multipleSelection:[],wsData:[]}}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Pedidos")]),e._v(" "),e._l(Math.ceil(e.wsData.length/3),function(t){return n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{gutter:20}},e._l(e.wsData.slice(3*(t-1),3*t),function(t){return n("el-col",{key:t.num_pedido,attrs:{span:8}},[n("div",[n("el-card",{staticClass:"box-card",attrs:{jest:"card"}},[n("el-button",{staticClass:"botonCamarero",attrs:{type:"primary"},on:{click:e.callWsCamarero}},[e._v("Avisar camarero")]),e._v(" "),n("strong",[e._v("Mesa "+e._s(t.mesa))]),e._v(" "),n("el-table",{ref:"multipleTable",refInFor:!0,staticStyle:{width:"100%"},attrs:{data:t.item,"row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50%"}}),e._v(" "),n("el-table-column",{attrs:{prop:"nombre",label:"Producto"}}),e._v(" "),n("el-table-column",{attrs:{prop:"comentario",label:"Comentario"}})],1)],1)],1)])}))})],2)},staticRenderFns:[]};var k=n("VU/8")(y,S,!1,function(e){n("fjCq")},null,null).exports,P=n("Xxa5"),C=n.n(P),$=n("exGp"),D=n.n($),I={data:function(){return{platos:null,loading:!0}},methods:{cargarPlatos:function(){var e=this;return D()(C.a.mark(function t(){var n;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:n=t.sent,e.platos=n.data,e.loading=!1,console.log(n.data);case 6:case"end":return t.stop()}},t,e)}))()}},beforeMount:function(){this.cargarPlatos()}},q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Modificar carta")]),e._v(" "),n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{gutter:20}},e._l(e.platos,function(t){return n("el-col",{key:t.id,attrs:{span:8}},[n("div",[n("el-card",{staticClass:"box-card",attrs:{jest:"card"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},["plato"===t.tipo?n("el-tag",{staticClass:"etiquetaPlato"},[e._v("Plato")]):e._e(),e._v(" "),"bebida"===t.tipo?n("el-tag",{staticClass:"etiquetaPlato",attrs:{type:"success"}},[e._v("Bebida")]):e._e(),e._v(" "),n("span",[n("strong",[e._v(e._s(t.nombre))])]),e._v(" "),n("el-button",{staticClass:"botonModificar",attrs:{type:"text"}},[e._v("Modificar")])],1),e._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.precio)+"€")])],1),e._v(" "),n("el-col",{attrs:{span:20}},[n("div",[e._v("\n              "+e._s(t.descripcion)+"\n            ")])])],1)],1)],1)])}))],1)},staticRenderFns:[]};var N=n("VU/8")(I,q,!1,function(e){n("tNuR")},null,null).exports,z={data:function(){return{platos:[],search:"",loading:!0}},methods:{cargarPlatos:function(){var e=this;return D()(C.a.mark(function t(){var n;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:n=t.sent,e.platos=n.data,e.loading=!1,console.log(n.data);case 6:case"end":return t.stop()}},t,e)}))()},handleEdit:function(e,t){console.log(e,t)},cambiaDisponibilidad:function(e){console.log(this.platos.find(function(t){return t.id===e}).nombre+" -> "+this.platos.find(function(t){return t.id===e}).disponible),b(e,this.platos.find(function(t){return t.id===e}).disponible)}},beforeMount:function(){this.cargarPlatos()}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Disponibilidad de la carta")]),e._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20,offset:2}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.platos.filter(function(t){return!e.search||t.nombre.toLowerCase().includes(e.search.toLowerCase())})}},[n("el-table-column",{attrs:{label:"Plato o bebida",prop:"nombre"}}),e._v(" "),n("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-input",{attrs:{size:"mini",placeholder:"Buscar en la carta"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[n("el-checkbox-button",{on:{change:function(n){e.cambiaDisponibilidad(t.row.id)}},model:{value:e.platos.find(function(e){return e.id===t.row.id}).disponible,callback:function(n){e.$set(e.platos.find(function(e){return e.id===t.row.id}),"disponible",n)},expression:"platos.find(plato => plato.id === scope.row.id).disponible"}},[e._v("Disponible")])]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var A=n("VU/8")(z,E,!1,function(e){n("fCx4")},null,null).exports,M={data:function(){return{form:{nombre:"",descripcion:"",tipo:"",precio:0,alergenos:[],ingredientes:[]},alergenos:[],ingredientes:[],rules:{nombre:[{required:!0,message:"Por favor introduce el nombre",trigger:"blur"},{min:3,message:"El nombre debe ser superior a 3 letras",trigger:"blur"}],tipo:[{required:!0,message:"Por favor selecciona un tipo",trigger:"change"}],descripcion:[{required:!0,message:"Por favor introduce la descripción",trigger:"blur"},{min:3,message:"La descripción debe ser superior a 3 letras",trigger:"blur"}],precio:[{type:"number",required:!0,message:"Por favor introduce el precio",trigger:"blur"},{type:"number",min:1,max:999,message:"El precio debe ser superior a 0€",trigger:"blur"}]}}},methods:{comprobarFormulario:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("Error al comprobar los datos!!"),t.error(),!1;t.onSubmit()})},cargarAlergenos:function(){var e=this;return D()(C.a.mark(function t(){var n;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:n=t.sent,e.alergenos=n.data;case 4:case"end":return t.stop()}},t,e)}))()},cargarIngredientes:function(){var e=this;return D()(C.a.mark(function t(){var n;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:n=t.sent,e.ingredientes=n.data;case 4:case"end":return t.stop()}},t,e)}))()},anyadirIngredientesNuevos:function(e){var t=this;return D()(C.a.mark(function n(){var r;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<e.length)){t.next=7;break}return t.next=4,x(e[r]);case 4:r++,t.next=1;break;case 7:case"end":return t.stop()}},n,t)}))()},buscarIdIngredientes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.ingredientes.find(function(t){return t.nombre===e[n]}).id);return t},onSubmit:function(){var e=this;return D()(C.a.mark(function t(){var n,r,i,o;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.form),n=e.form.ingredientes.filter(function(e){return"string"==typeof e}),r=e.form.ingredientes.filter(function(e){return"number"==typeof e}),i=r,!(n.length>0)){t.next=11;break}return o=e.anyadirIngredientesNuevos(n),t.next=8,o;case 8:return t.next=10,e.cargarIngredientes();case 10:i=i.concat(e.buscarIdIngredientes(n));case 11:v(e.form.nombre,e.form.descripcion,e.form.precio,e.form.tipo,e.form.alergenos,i),e.exito(),console.log("Nuevo plato añadido -> "+e.form.nombre+" "+e.form.descripcion+" "+e.form.precio+" "+e.form.tipo+" "+e.form.alergenos+" "+i);case 14:case"end":return t.stop()}},t,e)}))()},exito:function(){this.$message({showClose:!0,message:"El producto se ha añadido a la carta correctamente",type:"success"})},error:function(){this.$message({showClose:!0,message:"Ups, comprueba los datos",type:"error"})}},beforeMount:function(){this.cargarIngredientes(),this.cargarAlergenos()}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Añadir a carta")]),e._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:14,offset:4}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Nombre",prop:"nombre",required:""}},[n("el-input",{model:{value:e.form.nombre,callback:function(t){e.$set(e.form,"nombre",t)},expression:"form.nombre"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Descripción",prop:"descripcion",required:""}},[n("el-input",{model:{value:e.form.descripcion,callback:function(t){e.$set(e.form,"descripcion",t)},expression:"form.descripcion"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"Tipo",prop:"tipo",required:""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Selecciona el tipo de plato o bebida"},model:{value:e.form.tipo,callback:function(t){e.$set(e.form,"tipo",t)},expression:"form.tipo"}},[n("el-option",{attrs:{label:"Primero",value:"2"}}),e._v(" "),n("el-option",{attrs:{label:"Segundo",value:"3"}}),e._v(" "),n("el-option",{attrs:{label:"Postre",value:"4"}}),e._v(" "),n("el-option",{attrs:{label:"Bebida",value:"1"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"Alérgenos",prop:"alergenos"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",placeholder:"Selecciona los alérgenos que contiene"},model:{value:e.form.alergenos,callback:function(t){e.$set(e.form,"alergenos",t)},expression:"form.alergenos"}},e._l(e.alergenos,function(e){return n("el-option",{key:e.id,attrs:{label:e.nombre,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"Ingredientes",prop:"ingredientes",required:""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"",placeholder:"Selecciona y/o añade sus ingredientes"},model:{value:e.form.ingredientes,callback:function(t){e.$set(e.form,"ingredientes",t)},expression:"form.ingredientes"}},e._l(e.ingredientes,function(e){return n("el-option",{key:e.id,attrs:{label:e.nombre,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"Precio",prop:"precio",required:""}},[n("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",type:"number"},model:{value:e.form.precio,callback:function(t){e.$set(e.form,"precio",e._n(t))},expression:"form.precio"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"boton",attrs:{type:"primary"},on:{click:function(t){e.comprobarFormulario("form")}}},[e._v("Añadir a la carta")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var W=n("VU/8")(M,R,!1,function(e){n("JP8q")},null,null).exports;r.default.use(d.a);var T=new d.a({routes:[{path:"/",name:"Inicio",component:k},{path:"/pedidos",name:"pedidos",component:k},{path:"/disponibilidad",name:"disponibilidad",component:A},{path:"/modificar",name:"modificar",component:N},{path:"/anadir",name:"anadir",component:W}]});r.default.component("v-icon",l.a),r.default.config.productionTip=!1,r.default.use(o.a,{locale:s.a}),new r.default({el:"#app",router:T,components:{App:u},template:"<App/>"})},fCx4:function(e,t){},fjCq:function(e,t){},tNuR:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6cc650c72f3937576de6.js.map